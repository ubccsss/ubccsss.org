# ubccsss.org

Website for the UBC Computer Science Student Society.

## Contributing

We welcome contributions of any kind including pages, suggestions, bug reports,
pull requests etc. We would love to hear from you.

Additional documentation can be found in the [`docs`](./docs) folder.

### Add a new event

Create a new event from the template using the `hugo new` command. Replace "2021-01-01" with the day of the event, and "cool-event" with the URL for the event. The URL should be lowercase.

```shell
hugo new events/2021-01-01-cool-event.md
```

### Add a course review

We especially appreciate contributions to our growing [course review database](https://ubccsss.org/services/courses/)!

There's a course review form on each course page at [ubccsss.org/services/courses](https://ubccsss.org/services/courses/). Course review submissions are manually processed by CSSS team members, but if you would like to help us add your review directly to the course page by making a PR:

1. Navigate to a course page on our [course review database](https://ubccsss.org/services/courses/) and submit a course review.
2. Look in this [repository's issues](https://github.com/ubccsss/ubccsss.org/issues) to find your review. It'll have been automatically generated by a GitHub user called `csssbot`.
3. On the review issue, click the 'View YAML to copy' dropdown and copy the contents of the code block.
4. Look in this repository's [`data/courseReviews/`](https://github.com/ubccsss/ubccsss.org/tree/master/data/courseReviews) directory.
    * If the course you're reviewing already has a file, paste your review above the old reviews - be wary of the indenting and follow the format of the other reviews there.
	* If the course you're reviewing does not already exist, create a new file named `cpsc-[course number].yaml`. Add a dictionary key named `reviews`, and paste your review under it. Follow the format of the other files if you run into difficulties!
5. Please run a YAML formatter (copy-paste the YAML file into [jsonformatter.org/yaml-formatter](https://jsonformatter.org/yaml-formatter), for example) to ensure your YAML formatting is valid before submitting your PR.

#### Important folders

##### `content`

Contains content files corresponding to every post, event, and page.
The `events` folder contains events which can be added to a student's calendar,
and the `posts` folder contain general posts to display.

##### `data`

YAML files with some data used elsewhere in the site, including the Cube's
address, images for the 3D cube on the homepage, and social media links.

##### `layouts` and `themes`.

HTML template files for the site. The
[hugo-bootstrap](https://themes.gohugo.io/hugo-bootstrap/) theme is used as a
base for the site. Files with the same name in the `layouts` folder override
files in the `themes/hugo-bootstrap` folder.

##### `static`

Static files that are copied into the website with no modifications. Images and
PDF files are placed here.

#### Headers and Redirects

HTTP [headers](https://docs.netlify.com/routing/headers/) can be set by editing the `static/_headers` file.

Short links and other [redirects](https://docs.netlify.com/routing/redirects/) can be configured in the `static/_redirects` file. If you want to redirect to another page on the site, you can add a `aliases` item to the metadata.

### Environments

The site has three environments:

- `development`: This enviroment is used for development.
- `preview`: The enviroment used for previewing the site on [Netlify deploy previews](https://docs.netlify.com/site-deploys/deploy-previews/)(previews for merge requests).
- `production`: This enviroment is used for production.

Each environment has its own environment variables accessible in the `config` folder.

#### Config folder

The `config` folder contains the following folders:

- `_default`
- `development`
- `preview`
- `production`

`_default` contains the base configuration files, and depending on the environment, the files in the other folders will be automatically merged into the base configuration if `_merge: deep` is added to the base file.

`hugo server` runs the site in development mode by default.
`hugo` builds the site in production mode by default.

Read the [Hugo docs](https://gohugo.io/getting-started/configuration/) for more information on how they work.

#### Environment variables

Currently, there are three enviornment variables:

- `recaptchaSiteKey`: reCAPTCHA key for courses databse new review form
- `workerURL`: Cloudflare worker url for courses databse new review form
- `gcseURL`: Google custom search engine url for searchbar
- `CFBeaconData` : Data required for Cloudflare Analytics, which only includes our token for now

#### netlify.toml

netlify.toml contains the configuration for the Netlify. `HUGO_ENV` is used to select the environment for different Netlify environments.

### Build

To view the site locally, you need to clone this repository:

```bash
git clone https://github.com/ubccsss/ubccsss.org.git
```

You'll also need to
[install Hugo](https://gohugo.io/getting-started/installing/). The current
version of Hugo used is listed in the [`netlify.toml`](netlify.toml) file, under
the key `HUGO_VERSION`.

Then to view the website in your browser, run Hugo and open up the link:

```bash
â–¶ hugo server

Building sites ...
.
.
Serving pages from memory
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
```

## Related

- [ubccsss/exams](https://github.com/ubccsss/exams) - The site for our exam database.
- [ubccsss/tcf](https://github.com/ubccsss/tcf) - The website for the Technical Career Fair.
- [ubccsss/style](https://github.com/ubccsss/styles) - Our online style guide.
